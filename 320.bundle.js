"use strict";(self.webpackChunkwasm_game_of_life=self.webpackChunkwasm_game_of_life||[]).push([[320],{409:(e,t,n)=>{let r;function o(e){r=e}n.d(t,{KM:()=>y,Or:()=>M,Pd:()=>p,a2:()=>b,bL:()=>w,gM:()=>T,iX:()=>v,kb:()=>C,oT:()=>o,ug:()=>k}),e=n.hmd(e);const i=new Array(128).fill(void 0);function s(e){return i[e]}i.push(void 0,null,!0,!1);let l=i.length;let a=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let c=null;function _(){return null!==c&&0!==c.byteLength||(c=new Uint8Array(r.memory.buffer)),c}function u(e,t){return e>>>=0,a.decode(_().subarray(e,e+t))}let h=null;function f(){return null!==h&&0!==h.byteLength||(h=new Int32Array(r.memory.buffer)),h}let d=0,g=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const m="function"==typeof g.encodeInto?function(e,t){return g.encodeInto(e,t)}:function(e,t){const n=g.encode(e);return t.set(n),{read:e.length,written:n.length}},w=Object.freeze({Dead:0,0:"Dead",Alive:1,1:"Alive"});class p{static __wrap(e){e>>>=0;const t=Object.create(p.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_universe_free(e)}tick(){r.universe_tick(this.__wbg_ptr)}static new(){const e=r.universe_new();return p.__wrap(e)}render(){let e,t;try{const i=r.__wbindgen_add_to_stack_pointer(-16);r.universe_render(i,this.__wbg_ptr);var n=f()[i/4+0],o=f()[i/4+1];return e=n,t=o,u(n,o)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}width(){return r.universe_width(this.__wbg_ptr)>>>0}height(){return r.universe_height(this.__wbg_ptr)>>>0}cells(){return r.universe_cells(this.__wbg_ptr)}set_width(e){r.universe_set_width(this.__wbg_ptr,e)}set_height(e){r.universe_set_height(this.__wbg_ptr,e)}toggle_cell(e,t){r.universe_toggle_cell(this.__wbg_ptr,e,t)}}function b(){return function(e){l===i.length&&i.push(i.length+1);const t=l;return l=i[t],i[t]=e,t}(new Error)}function y(e,t){const n=function(e,t,n){if(void 0===n){const n=g.encode(e),r=t(n.length,1)>>>0;return _().subarray(r,r+n.length).set(n),d=n.length,r}let r=e.length,o=t(r,1)>>>0;const i=_();let s=0;for(;s<r;s++){const t=e.charCodeAt(s);if(t>127)break;i[o+s]=t}if(s!==r){0!==s&&(e=e.slice(s)),o=n(o,r,r=s+3*e.length,1)>>>0;const t=_().subarray(o+s,o+r);s+=m(e,t).written}return d=s,o}(s(t).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=d;f()[e/4+1]=o,f()[e/4+0]=n}function v(e,t){let n,o;try{n=e,o=t,console.error(u(e,t))}finally{r.__wbindgen_free(n,o,1)}}function k(e){!function(e){const t=s(e);(function(e){e<132||(i[e]=l,l=e)})(e)}(e)}function T(e,t){console.time(u(e,t))}function C(e,t){console.timeEnd(u(e,t))}function M(e,t){throw new Error(u(e,t))}},287:(e,t,n)=>{n.r(t)},320:(e,t,n)=>{n.r(t);var r=n(422),o=n(409);(0,o.oT)(r),n(287);const i=o.Pd.new(),s=i.width(),l=i.height(),a=(Array(l).keys(),document.querySelector('[data-game="canvas"]'));a.height=6*l+1,a.width=6*s+1,a.imageSmoothingEnabled=!1;const c=a.getContext("2d");let _=null;const u=()=>{p.render(),i.tick(),h(),d(),_=requestAnimationFrame(u)},h=()=>{c.beginPath(),c.strokeStyle="#CCCCCC";for(let e=0;e<=s;e++)c.moveTo(6*e+1,0),c.lineTo(6*e+1,6*l+1);for(let e=0;e<=l;e++)c.moveTo(0,6*e+1),c.lineTo(6*s+1,6*e+1);c.stroke()},f=(e,t)=>e*s+t,d=()=>{const e=i.cells(),t=new Uint8Array(r.memory.buffer,e,s*l);c.beginPath(),g(t,!0),g(t,!1),c.stroke()},g=(e,t)=>{c.fillStyle=t?"#000000":"#FFFFFF";const n=t?o.bL.Alive:o.bL.Dead;for(let t=0;t<l;t++)for(let r=0;r<s;r++)e[f(t,r)]===n&&c.fillRect(6*r+1,6*t+1,5,5)},m=document.querySelector('[data-game="play-pause"]'),w=()=>{m.textContent="pause",u()};m.addEventListener("click",(e=>{null===_?w():(m.textContent="play",cancelAnimationFrame(_),_=null)})),a.addEventListener("click",(e=>{const t=a.getBoundingClientRect(),n=a.width/t.width,r=a.height/t.height,o=(e.clientX-t.left)*n,c=(e.clientY-t.top)*r,_=Math.min(Math.floor(c/6),l-1),u=Math.min(Math.floor(o/6),s-1);i.toggle_cell(_,u),h(),d()}));const p=new class{constructor(){this.fps=document.querySelector('[data-game="fps"]'),this.frames=[],this.lastFrameTimeStamp=performance.now()}render(){const e=performance.now(),t=e-this.lastFrameTimeStamp;this.lastFrameTimeStamp=e;const n=1/t*1e3;this.frames.push(n),this.frames.length>100&&this.frames.shift();let r=1/0,o=-1/0,i=0;for(let e=0;e<this.frames.length;e++)i+=this.frames[e],r=Math.min(this.frames[e],r),o=Math.max(this.frames[e],o);let s=i/this.frames.length;this.fps.textContent=`\n      Frames per Second:\n      latest = ${Math.round(n)}\n      avg of last 100 = ${Math.round(s)}\n      min of last 100 = ${Math.round(r)}\n      max of last 100 = ${Math.round(o)}\n    `.trim()}};h(),d(),w()},422:(e,t,n)=>{var r=n.w[e.id];for(var o in n.r(t),r)o&&(t[o]=r[o]);n(409),r[""]()}}]);
//# sourceMappingURL=320.bundle.js.map